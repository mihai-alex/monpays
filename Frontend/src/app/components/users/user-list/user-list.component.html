<h2>Users List</h2>

<!-- Filter input (optional) -->
<mat-form-field class="filter-input">
  <input
    matInput
    (keyup)="applyFilter($event)"
    placeholder="Filter by matching text on any column"
  />
</mat-form-field>

<mat-divider></mat-divider>

<button
  *ngIf="isAllowed(EOperationType.CREATE)"
  (click)="createUser()"
  mat-button
  color="primary"
  style="margin-right: 10px"
>
  Create a new user
</button>

<mat-divider style="height: 40px"></mat-divider>

<table
  mat-table
  [dataSource]="dataSource"
  matSort
  matPaginator
  class="mui-table"
>
  <!-- Username Column -->
  <ng-container matColumnDef="userName">
    <th
      mat-header-cell
      *matHeaderCellDef
      mat-sort-header
      class="mui-header-cell"
    >
      Username
    </th>
    <td mat-cell *matCellDef="let user" class="mui-cell">
      {{ user.userName }}
    </td>
  </ng-container>

  <!-- First Name Column -->
  <ng-container matColumnDef="firstName">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>First Name</th>
    <td mat-cell *matCellDef="let user">{{ user.firstName }}</td>
  </ng-container>

  <!-- Last Name Column -->
  <ng-container matColumnDef="lastName">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</th>
    <td mat-cell *matCellDef="let user">{{ user.lastName }}</td>
  </ng-container>

  <!-- Email Column -->
  <ng-container matColumnDef="emailAddress">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
    <td mat-cell *matCellDef="let user">{{ user.emailAddress }}</td>
  </ng-container>

  <!-- Phone Column -->
  <ng-container matColumnDef="phoneNumber">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Phone</th>
    <td mat-cell *matCellDef="let user">{{ user.phoneNumber }}</td>
  </ng-container>

  <!-- Address Column -->
  <ng-container matColumnDef="address">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Address</th>
    <td mat-cell *matCellDef="let user">{{ user.address }}</td>
  </ng-container>

  <!-- Actions Column -->
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef class="mui-header-cell">Actions</th>
    <td mat-cell *matCellDef="let user" class="mui-cell">
      <button
        mat-button
        (click)="detailsUser(user.userName)"
        color="primary"
        style="margin-right: 10px"
      >
        Details
      </button>
      <button
        *ngIf="isAllowed(EOperationType.MODIFY)"
        mat-button
        (click)="modifyUser(user.userName)"
        color="primary"
        style="margin-right: 10px"
        [disabled]="user.status === 'REMOVED' || user.status === 'IN_REPAIR'"
      >
        Modify
      </button>
      <button
        *ngIf="isAllowed(EOperationType.REMOVE)"
        mat-button
        (click)="removeUser(user.userName)"
        color="warn"
        style="margin-right: 10px"
        [disabled]="user.status === 'REMOVED'"
      >
        Remove
      </button>
    </td>
  </ng-container>

  <!-- Header row -->
  <tr
    mat-header-row
    *matHeaderRowDef="displayedColumns; sticky: true"
    class="mui-header-row"
  ></tr>
  <!-- Data rows -->
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>

<!-- Paginator -->
<mat-paginator
  [pageSizeOptions]="[5, 10, 25, 100]"
  showFirstLastButtons
  class="mui-paginator"
></mat-paginator>
